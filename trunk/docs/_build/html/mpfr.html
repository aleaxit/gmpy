

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multiple-precision Reals &mdash; gmpy2 v2.0.0b1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0.0b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gmpy2 v2.0.0b1 documentation" href="index.html" />
    <link rel="next" title="Multiple-precision Complex" href="mpc.html" />
    <link rel="prev" title="Multiple-precision Rationals" href="mpq.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="mpc.html" title="Multiple-precision Complex"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mpq.html" title="Multiple-precision Rationals"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gmpy2 v2.0.0b1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="multiple-precision-reals">
<h1>Multiple-precision Reals<a class="headerlink" href="#multiple-precision-reals" title="Permalink to this headline">¶</a></h1>
<p>gmpy2 replaces the <em>mpf</em> type from gmpy 1.x with a new <em>mpfr</em> type based on
the MPFR library. The new <em>mpfr</em> type supports correct rounding, selectable
rounding modes, and many trigonometric, exponential, and special functions. A
<em>context manager</em> is used to control precision, rounding modes, and the
behavior of exceptions.</p>
<p>The default precision of an <em>mpfr</em> is 53 bits - the same precision as Python&#8217;s
<em>float</em> type. If the precison is changed, then <tt class="docutils literal"><span class="pre">mpfr(float('1.2'))</span></tt> differs
from <tt class="docutils literal"><span class="pre">mpfr('1.2')</span></tt>. To take advantage of the higher precision provided by
the <em>mpfr</em> type, always pass constants as stringsl</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gmpy2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gmpy2</span> <span class="kn">import</span> <span class="n">mpfr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpfr</span><span class="p">(</span><span class="s">&#39;1.2&#39;</span><span class="p">)</span>
<span class="go">mpfr(&#39;1.2&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpfr</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s">&#39;1.2&#39;</span><span class="p">))</span>
<span class="go">mpfr(&#39;1.2&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span><span class="o">.</span><span class="n">precision</span><span class="o">=</span><span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpfr</span><span class="p">(</span><span class="s">&#39;1.2&#39;</span><span class="p">)</span>
<span class="go">mpfr(&#39;1.2000000000000000000000000000006&#39;,100)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpfr</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s">&#39;1.2&#39;</span><span class="p">))</span>
<span class="go">mpfr(&#39;1.1999999999999999555910790149937&#39;,100)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="section" id="contexts">
<h2>Contexts<a class="headerlink" href="#contexts" title="Permalink to this headline">¶</a></h2>
<p>A <em>context</em> is used to control the behavior of <em>mpfr</em> (and <em>mpc</em>) arithmetic.
In addition to controlling the precision, the rounding mode can be specified,
minimum and maximum exponent values can be changed, various exceptions can be
raised or ignored, gradual underflow can be enabled, and returning complex
results can be enabled.</p>
<p><tt class="docutils literal"><span class="pre">gmpy2.context()</span></tt> creates a new context with all options set to default.
<tt class="docutils literal"><span class="pre">gmpy2.set_context(*ctx*)</span></tt> will set the active context to <em>ctx</em>.
<tt class="docutils literal"><span class="pre">gmpy2.get_context()</span></tt> will return a reference to the active context. Note
that contexts are mutable: modifying the reference returned by get_context()
will modify the active context until a new context is enabled with
set_context().</p>
<p>The following example just modifies the precision. The remaining options will
be discussed later.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">gmpy2</span><span class="o">.</span><span class="n">context</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span>
<span class="go">context(precision=53, mpc_rprec=Default, mpc_iprec=Default,</span>
<span class="go">        round=RoundToNearest, mpc_rround=Default, mpc_iround=Default,</span>
<span class="go">        emax=1073741823, emin=-1073741823,</span>
<span class="go">        subnormalize=False,</span>
<span class="go">        trap_underflow=False, underflow=False,</span>
<span class="go">        trap_overflow=False, overflow=False,</span>
<span class="go">        trap_inexact=False, inexact=False,</span>
<span class="go">        trap_invalid=False, invalid=False,</span>
<span class="go">        trap_erange=False, erange=False,</span>
<span class="go">        trap_divzero=False, divzero=False,</span>
<span class="go">        trap_expbound=False,</span>
<span class="go">        allow_complex=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997898&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span><span class="o">.</span><span class="n">precision</span><span class="o">=</span><span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997896964091736687316&#39;,100)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span><span class="o">.</span><span class="n">precision</span><span class="o">+=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997896964091736687312762351&#39;,120)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">=</span><span class="n">gmpy2</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">.</span><span class="n">precision</span><span class="o">+=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997896964091736687312762354406182&#39;,140)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">gmpy2</span><span class="o">.</span><span class="n">context</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997898&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">.</span><span class="n">precision</span><span class="o">+=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997898&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmpy2</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">mpfr(&#39;2.2360679774997896964091736687312762354406183596116&#39;,160)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Multiple-precision Reals</a><ul>
<li><a class="reference internal" href="#contexts">Contexts</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mpq.html"
                        title="previous chapter">Multiple-precision Rationals</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mpc.html"
                        title="next chapter">Multiple-precision Complex</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mpfr.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="mpc.html" title="Multiple-precision Complex"
             >next</a> |</li>
        <li class="right" >
          <a href="mpq.html" title="Multiple-precision Rationals"
             >previous</a> |</li>
        <li><a href="index.html">gmpy2 v2.0.0b1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Case Van Horsen.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>